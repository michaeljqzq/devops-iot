{
	"id": "AspNetCore",
	"name": "ASP.NET Core",
	"category": "Build",
	"iconTaskId": "5541a522-603c-47ad-91fc-a4b1d163081b",
	"description": "Build ASP.NET Core web applications",
	"template": {
		"buildNumberFormat": "$(date:yyyyMMdd)$(rev:.r)",
		"process": {
			"type": 1,
			"phases": [
				{
          "steps": [
            {
              "enabled": true,
              "displayName": "Restore",
              "inputs": {
                "command": "restore",
                "publishWebProjects": "true",
                "projects": "$(Parameters.RestoreBuildProjects)",
                "arguments": "",
                "zipAfterPublish": "true"
              },
              "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
              }
            },
            {
              "enabled": true,
              "displayName": "Build",
              "inputs": {
                "command": "build",
                "publishWebProjects": "true",
                "projects": "$(Parameters.RestoreBuildProjects)",
                "arguments": "--configuration $(BuildConfiguration)",
                "zipAfterPublish": "true"
              },
              "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
              }
            },
            {
              "enabled": true,
              "displayName": "Test",
              "inputs": {
                "command": "test",
                "publishWebProjects": "true",
                "projects": "$(Parameters.TestProjects)",
                "arguments": "--configuration $(BuildConfiguration)",
                "zipAfterPublish": "true"
              },
              "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
              }
            },
            {
              "enabled": true,
              "displayName": "Publish",
              "inputs": {
                "command": "publish",
                "publishWebProjects": true,
                "projects": "",
                "arguments": "--configuration $(BuildConfiguration) --output $(build.artifactstagingdirectory)",
                "zipAfterPublish": true
              },
              "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
              }
            },
            {
              "enabled": true,
              "continueOnError": false,
              "alwaysRun": false,
              "displayName": "Copy ARM templates",
              "timeoutInMinutes": 0,
              "task": {
                "id": "5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c",
                "versionSpec": "2.*",
                "definitionType": "task"
              },
              "inputs": {
                "SourceFolder": "ArmTemplates",
                "Contents": "**",
                "TargetFolder": "$(build.artifactstagingdirectory)",
                "CleanTargetFolder": "false",
                "OverWrite": "false",
                "flattenFolders": "false"
              }
            },
            {
              "enabled": true,
              "alwaysRun": true,
              "displayName": "Publish Artifact",
              "inputs": {
                "PathtoPublish": "$(build.artifactstagingdirectory)",
                "ArtifactName": "drop",
                "ArtifactType": "Container",
                "TargetPath": "\\\\my\\share\\$(Build.DefinitionName)\\$(Build.BuildNumber)",
                "Parallel": "false",
                "ParallelCount": "8"
              },
              "task": {
                "id": "2ff763a7-ce83-4e1f-bc89-0ae63477cebe",
                "versionSpec": "1.*",
                "definitionType": "task"
              }
            }
          ]
				}
			]
		},
		"options": [
			{
				"definition": {
					"id": "5D58CC01-7C75-450C-BE18-A388DDB129EC"
				},
				"enabled": true,
				"inputs": {}
			}
		],
		"variables": {
			"system.debug": {
				"value": "false",
				"allowOverride": true
			},
			"BuildConfiguration": {
				"value": "release",
				"allowOverride": true
			},
			"BuildPlatform": {
				"value": "any cpu",
				"allowOverride": true
			}
		},
		"triggers": [],
		"processParameters": {
			"inputs": [
				{
					"options": {},
					"properties": {},
					"name": "RestoreBuildProjects",
					"label": "Project(s) to restore and build",
					"defaultValue": "**/*.csproj",
					"type": "multiline",
					"helpMarkDown": "Relative path of the .csproj file(s) from repo root. Wildcards can be used. For example, **/*.csproj for all .csproj files in all the subfolders.",
					"visibleRule": "",
					"groupName": ""
				},
				{
					"options": {},
					"properties": {},
					"name": "TestProjects",
					"label": "Project(s) to test",
					"defaultValue": "**/*Tests/*.csproj",
					"type": "multiline",
					"helpMarkDown": "Relative path of the .csproj file(s) from repo root. Wildcards can be used. For example, **/*.csproj for all .csproj files in all the subfolders.",
					"visibleRule": "",
					"groupName": ""
				}
			]
		}
	}
}
