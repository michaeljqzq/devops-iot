{
  "groups": [{
    "id": "virtualMachine",
    "name": "VM as simulated Edge device",
    "properties": {
      "context": "service"
    }
  }],
  "inputs": [{
      "id": "vmName",
      "type": "string",
      "description": "Name of virtual machine to be created",
      "Name": "Virtual machine name",
      "inputMode": "TextBox",
      "groupId": "virtualMachine",
      "isRequired": true,
      "defaultValue": "devops-edgevm",
      "properties": {
        "attributes": "primary;"
      },
      "staticValidation": {
        "pattern": "^(?![0-9]*$)[a-zA-Z0-9\\-]+$",
        "errorMessage": "Virtual machine name should be alpha-numeric or '-' and should not be only numeric, less than 16 characters",
        "minLength": 1,
        "maxLength": 15
      }
    },
    {
      "id": "vmUsername",
      "type": "string",
      "description": "Username of virtual machine to be created",
      "Name": "Virtual machine user name",
      "inputMode": "TextBox",
      "groupId": "virtualMachine",
      "isRequired": true,
      "defaultValue": "",
      "properties": {
        "attributes": "primary;"
      },
      "staticValidation": {
        "pattern": "^(?:(?!(^(administrator|admin|admin1|admin2|user|user1|user2|user3|user4|user5|test|test1|test2|test3|1|123|a|actusr|adm|aspnet|backup|console|guest|owner|root|server|sql|support|support_388945a0|sys)$)).)*$",
        "errorMessage": "The specified user name is not allowed. User names must meet length requirements and must not include reserved words or unsupported characters. Try again with a different value.",
        "minLength": 1,
        "maxLength": 15
      }
    },
    {
      "id": "vmPassword",
      "type": "securestring",
      "description": "Password of virtual machine to be created",
      "Name": "Password",
      "inputMode": "PasswordBox",
      "groupId": "virtualMachine",
      "isRequired": true,
      "properties": {
        "attributes": "primary;"
      },
      "staticValidation": {
        "pattern": "^((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])|(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%&/=?_,:;])|(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%&/=?_,:;])|(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%&/=?_,:;])).{12,123}$",
        "errorMessage": "Password must have at least 12 characters and 3 of the following: 1 lowercase character, 1 uppercase character, 1 number, and 1 special character that is not '\\' or '-'.",
        "minLength": 12,
        "maxLength": 123
      }
    },
    {
      "id": "vmConfirmPassword",
      "type": "securestring",
      "description": "Password of virtual machine to be created",
      "Name": "Confirm password",
      "inputMode": "PasswordBox",
      "groupId": "virtualMachine",
      "isRequired": true,
      "properties": {
        "attributes": "primary;"
      },
      "staticValidation": {
        "pattern": "^((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])|(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%&/=?_,:;])|(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%&/=?_,:;])|(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%&/=?_,:;])).{12,123}$",
        "errorMessage": "Password must have at least 12 characters and 3 of the following: 1 lowercase character, 1 uppercase character, 1 number, and 1 special character that is not '\\' or '-'.",
        "minLength": 12,
        "maxLength": 123
      }
    },
    {
      "id": "vmlocation",
      "type": "string",
      "description": "Location of the virtual machine.",
      "name": "Location",
      "inputMode": "Combo",
      "groupId": "virtualMachine",
      "isRequired": true,
      "dataSourceId": "virtualMachineLocations",
      "defaultValue": "South Central US"
    },
    {
      "id": "vmSize",
      "type": "string",
      "description": "Size of virtual machine",
      "Name": "Size",
      "inputMode": "Combo",
      "groupId": "virtualMachine",
      "isRequired": true,
      "defaultValue": "Standard_A0",
      "possibleValues": [{
        "value": "Standard_A0",
        "displayValue": "A0 Standard"
      }]
    },
    {
      "id": "vmOs",
      "type": "string",
      "Name": "Operating system",
      "groupId": "virtualMachine",
      "inputMode": "Combo",
      "isRequired": true,
      "defaultValue": "Linux",
      "possibleValues": [{
        "value": "Linux",
        "displayValue": "Linux"
      }]
    }
  ],
  "dataSources": [{
      "id": "virtualMachineLocations",
      "endpointUrlStem": "/subscriptions/{{{inputs.subscriptionId}}}/providers/Microsoft.Compute?api-version=2014-04-01-preview",
      "resultSelector": "$.resourceTypes[?(@.resourceType === 'virtualMachines')].locations"
    },
    {
      "id": "appInsightsLocation",
      "endpointUrlStem": "/subscriptions/{{{inputs.subscriptionId}}}/providers/microsoft.insights?api-version=2016-09-01",
      "resultSelector": "$.resourceTypes[?(@.resourceType === 'components')].locations"
    }
  ]
}